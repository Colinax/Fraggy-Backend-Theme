/*!
 * Fraggy Backend Theme v1.5.2
 * Jonathan Nessier, Neoflow (https://neoflow.ch) | The MIT License (MIT)
 * Responsive and Bootstrap based backend theme for WBCE
 */
var Theme=function(){this.init=function(){e(),a(),i(),n()};var e=function(){var e=$("#switchable");$("#stylesheet-switcher a").on("click",function(a){a.preventDefault();var i=$(this).blur().attr("href");$("body").fadeTo(400,0,function(){var a=$(this),n=$("<link>",{rel:"stylesheet",type:"text/css",href:i});Cookies.set("cssFile",i),e.after(n),n.load(function(){e.remove(),e=n,a.fadeTo(400,1)})})}),void 0!==Cookies.get("cssFile")&&e.attr("href",Cookies.get("cssFile"))},a=function(){var e=$(window),a=$("nav.sidebar"),i=$("ul.nav-xs-stacked"),n=$("div#serverInfoPanel");e.on("resize theme-resize",function(){e.outerWidth()>768?(a.height($("body").outerHeight()),i.removeClass("nav-stacked"),n.find('h3 > a[href="collapsed"]').trigger("click")):(a.height(""),i.addClass("nav-stacked"))}).trigger("theme-resize")},i=function(){$.ajax({dataType:"json",url:THEME_URL+"/api/sysinfo.php",success:function(e){$("ul.versions").find(".php").text(e.php.version)},error:function(e,a,i){$("ul.versions").find(".php").parent().remove()}})},n=function(){$("input:file").fileselect(),$("select").select2({theme:"bootstrap",minimumResultsForSearch:5,width:"100%",dropdownAutoWidth:!0}).focus(function(){$(this).select2("open")}),$(".datetimepicker").datetimepicker({locale:"en",format:"D.M.Y HH:mm",useCurrent:!1})};return{init:init}}();$(function(){$('button, input[type="button"], input[type="reset"]').addClass("btn").addClass("btn-default"),$('button[type="submit"], input[type="submit"]').addClass("btn").removeClass("btn-default").addClass("btn-primary"),$('input[type="text"], input[type="password"], textarea, select').addClass("form-control"),$(".sidebar-nav").each(function(){var e=$(this);0===e.find("li.current").length&&e.find("li:first").addClass("current"),e.find("li.dashboard > a").prepend('<i class="icon fa fa-fw fa-tachometer fa-fw"></i> '),e.find("li.preferences > a").prepend('<i class="icon fa fa-fw fa-cog fa-fw"></i> '),e.find("li.pages > a").prepend('<i class="icon fa fa-fw fa-files-o fa-fw"></i> '),e.find("li.media > a").prepend('<i class="icon fa fa-fw fa-picture-o fa-fw"></i> '),e.find("li.addons > a").prepend('<i class="icon fa fa-fw fa-th"></i> '),e.find("li.settings > a").prepend('<i class="icon fa fa-fw fa-cogs fa-fw"></i> '),e.find("li.admintools > a").prepend('<i class="icon fa fa-fw fa-cubes fa-fw"></i> '),e.find("li.access > a").prepend('<i class="icon fa fa-fw fa-users fa-fw"></i> ')});var e=$(".page-wrapper .container-fluid");0===e.find(".panel, .alert").length&&e.find("> div").addClass("panel panel-default").find("> div").addClass("panel-body"),$("#addonsPage nav.navbar a").each(function(){var e=$(this);e.attr("href").indexOf("templates")>-1?e.prepend('<i class="fa fa-fw fa-paint-brush"></i> '):e.attr("href").indexOf("modules")>-1?e.prepend('<i class="fa fa-fw fa-puzzle-piece"></i> '):e.attr("href").indexOf("languages")>-1&&e.prepend('<i class="fa fa-fw fa-language"></i> ')}),$("a > img").each(function(){var e=$(this);e.prop("src").indexOf("modify_16.png")>-1?e.parent().html('<i class="fa fa-fw fa-pencil"></i>'):e.prop("src").indexOf("options_16.png")>-1?e.parent().html('<i class="fa fa-fw fa-cog"></i>'):e.prop("src").indexOf("noclock_16.png")>-1?e.parent().html('<i class="fa fa-fw fa-list-alt"></i>'):e.prop("src").indexOf("view_16.png")>-1?e.parent().html('<i class="fa fa-fw fa-desktop"></i>'):e.prop("src").indexOf("up_16.png")>-1?e.parent().html('<i class="fa fa-fw fa-arrow-circle-up"></i>'):e.prop("src").indexOf("down_16.png")>-1?e.parent().html('<i class="fa fa-fw fa-arrow-circle-down"></i>'):e.prop("src").indexOf("delete_16.png")>-1?e.parent().html('<i class="fa fa-fw fa-trash"></i>'):e.prop("src").indexOf("folder_16.png")>-1?e.parent().html('<i class="fa fa-fw fa-folder-o"></i>'):e.prop("src").indexOf("add_child.png")>-1&&e.parent().html('<i class="fa fa-fw fa-files-o"></i>')});var a=$("#welcomeMessage"),i=a.text();i=i.replace("imBackend","im Backend"),a.text(i),"undefined"!=typeof CKEDITOR&&(CKEDITOR.on("instanceLoaded",function(){$.each(CKEDITOR.instances,function(e,a){a.setUiColor("#ffffff"),$(a.element).css({border:0,"box-shadow":"none"})})}),CKEDITOR.on("instanceReady",function(){$(window).resize()})),$('form[action="intro2.php"] table:first').addClass("table"),$(".jcalendar").length&&$.insert(WB_URL+"/include/jscalendar/calendar-system.css"),$(".jsadmin").length&&$.insert(WB_URL+"/modules/jsadmin/backend.css"),$("#publishdate, #enddate").css({width:150,display:"inline-block"})});