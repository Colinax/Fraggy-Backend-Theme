/*
 * Fraggy Backend Theme v1.5.4
 * Jonathan Nessier, Neoflow (https://neoflow.ch) | Licensed under MIT
 * Responsive and Bootstrap based backend theme for WBCE
 */
var Theme=function(){this.init=function(){a(),e(),i(),n()};var a=function(){var a=$("#switchable");$("#stylesheet-switcher a").on("click",function(e){e.preventDefault();var i=$(this).blur().attr("href");$("body").fadeTo(400,0,function(){var e=$(this),n=$("<link>",{rel:"stylesheet",type:"text/css",href:i});Cookies.set("cssFile",i),a.after(n),n.load(function(){a.remove(),a=n,e.fadeTo(400,1)})})}),void 0!==Cookies.get("cssFile")&&a.attr("href",Cookies.get("cssFile"))},e=function(){var a=$(window),e=$("ul.nav-xs-stacked"),i=$("div#serverInfoPanel");a.on("resize theme-resize",function(){a.outerWidth()>768?(e.removeClass("nav-stacked"),i.find('h3 > a[href="collapsed"]').trigger("click")):e.addClass("nav-stacked")}).trigger("theme-resize")},i=function(){$.ajax({dataType:"json",url:THEME_URL+"/api/sysinfo.php",success:function(a){$("ul.versions").find(".php").text(a.php.version)},error:function(a,e,i){$("ul.versions").find(".php").parent().remove()}})},n=function(){$("input:file").fileselect(),$("select").select2({theme:"bootstrap",minimumResultsForSearch:5,width:"100%",dropdownAutoWidth:!0}).focus(function(){$(this).select2("open")}),$(".datetimepicker").each(function(){var a=$(this);a.datetimepicker({locale:a.data("language")||navigator.language||navigator.userLanguage,format:a.data("format")?a.data("format"):"DD.M.Y HH:mm",extraFormats:["M/D/Y HH:mm"],useCurrent:!1})})};return{init:init}}();$(function(){$('button, input[type="button"], input[type="reset"]').addClass("btn").addClass("btn-default"),$('button[type="submit"], input[type="submit"]').addClass("btn").removeClass("btn-default").addClass("btn-primary"),$('input[type="text"], input[type="password"], textarea, select').addClass("form-control"),$(".sidebar-nav").each(function(){var a=$(this);0===a.find("li.current").length&&a.find("li:first").addClass("current"),a.find("li.dashboard > a").prepend('<i class="icon fa fa-fw fa-tachometer fa-fw"></i> '),a.find("li.preferences > a").prepend('<i class="icon fa fa-fw fa-cog fa-fw"></i> '),a.find("li.pages > a").prepend('<i class="icon fa fa-fw fa-files-o fa-fw"></i> '),a.find("li.media > a").prepend('<i class="icon fa fa-fw fa-picture-o fa-fw"></i> '),a.find("li.addons > a").prepend('<i class="icon fa fa-fw fa-th"></i> '),a.find("li.settings > a").prepend('<i class="icon fa fa-fw fa-cogs fa-fw"></i> '),a.find("li.admintools > a").prepend('<i class="icon fa fa-fw fa-cubes fa-fw"></i> '),a.find("li.access > a").prepend('<i class="icon fa fa-fw fa-users fa-fw"></i> ')});var a=$(".page-wrapper .container-fluid");0===a.find(".panel, .alert").length&&a.find("> div").addClass("panel panel-default").find("> div").addClass("panel-body"),$("#addonsPage nav.navbar a").each(function(){var a=$(this);a.attr("href").indexOf("templates")>-1?a.prepend('<i class="fa fa-fw fa-paint-brush"></i> '):a.attr("href").indexOf("modules")>-1?a.prepend('<i class="fa fa-fw fa-puzzle-piece"></i> '):a.attr("href").indexOf("languages")>-1&&a.prepend('<i class="fa fa-fw fa-language"></i> ')}),$("a > img").each(function(){var a=$(this);a.prop("src").indexOf("modify_16.png")>-1?a.parent().html('<i class="fa fa-fw fa-pencil"></i>'):a.prop("src").indexOf("options_16.png")>-1?a.parent().html('<i class="fa fa-fw fa-cog"></i>'):a.prop("src").indexOf("noclock_16.png")>-1?a.parent().html('<i class="fa fa-fw fa-list-alt"></i>'):a.prop("src").indexOf("view_16.png")>-1?a.parent().html('<i class="fa fa-fw fa-desktop"></i>'):a.prop("src").indexOf("up_16.png")>-1?a.parent().html('<i class="fa fa-fw fa-arrow-circle-up"></i>'):a.prop("src").indexOf("down_16.png")>-1?a.parent().html('<i class="fa fa-fw fa-arrow-circle-down"></i>'):a.prop("src").indexOf("delete_16.png")>-1?a.parent().html('<i class="fa fa-fw fa-trash"></i>'):a.prop("src").indexOf("folder_16.png")>-1?a.parent().html('<i class="fa fa-fw fa-folder-o"></i>'):a.prop("src").indexOf("add_child.png")>-1&&a.parent().html('<i class="fa fa-fw fa-files-o"></i>')});var e=$("#welcomeMessage"),i=e.text();i=i.replace("imBackend","im Backend"),e.text(i),"undefined"!=typeof CKEDITOR&&(CKEDITOR.on("instanceLoaded",function(){$.each(CKEDITOR.instances,function(a,e){e.setUiColor("#ffffff"),$(e.element).css({border:0,"box-shadow":"none"})})}),CKEDITOR.on("instanceReady",function(){$(window).resize()})),$('form[action="intro2.php"] table:first').addClass("table"),$(".jcalendar").length&&$.insert(WB_URL+"/include/jscalendar/calendar-system.css"),$(".jsadmin").length&&$.insert(WB_URL+"/modules/jsadmin/backend.css"),$("#publishdate, #enddate").css({width:150,display:"inline-block"})});